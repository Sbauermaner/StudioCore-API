# –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

## –î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏: 2025-01-XX

## –û–±–∑–æ—Ä

–ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∏ —É–ª—É—á—à–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (bpm, key, vocal) –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã.

---

## ‚ùå –ü—Ä–æ–±–ª–µ–º—ã –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: BPM - –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
- **–ë—ã–ª–æ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–≥ –∑–∞–¥–∞—Ç—å –ª—é–±–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ BPM (–≤–∫–ª—é—á–∞—è –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∏ –æ—á–µ–Ω—å –±–æ–ª—å—à–∏–µ)
- **–ü—Ä–∏–º–µ—Ä—ã:**
  - `bpm=10` ‚Üí –ø—Ä–∏–Ω–∏–º–∞–ª–æ—Å—å –∫–∞–∫ –µ—Å—Ç—å (—Å–ª–∏—à–∫–æ–º –º–µ–¥–ª–µ–Ω–Ω–æ)
  - `bpm=300` ‚Üí –ø—Ä–∏–Ω–∏–º–∞–ª–æ—Å—å –∫–∞–∫ –µ—Å—Ç—å (—Å–ª–∏—à–∫–æ–º –±—ã—Å—Ç—Ä–æ)
  - `bpm=-50` ‚Üí –ø—Ä–∏–Ω–∏–º–∞–ª–æ—Å—å –∫–∞–∫ –µ—Å—Ç—å (–Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)

### –ü—Ä–æ–±–ª–µ–º–∞ 2: Key - –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- **–ë—ã–ª–æ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–≥ –∑–∞–¥–∞—Ç—å –ª—é–±—É—é —Å—Ç—Ä–æ–∫—É –∫–∞–∫ key
- **–ü—Ä–∏–º–µ—Ä—ã:**
  - `key="InvalidKey123"` ‚Üí –ø—Ä–∏–Ω–∏–º–∞–ª–æ—Å—å –∫–∞–∫ –µ—Å—Ç—å
  - `key=""` ‚Üí –ø—Ä–∏–Ω–∏–º–∞–ª–æ—Å—å –∫–∞–∫ –µ—Å—Ç—å
  - –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –º–æ–≥–ª–∏ –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –æ—à–∏–±–∫–∞–º –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ

### –ü—Ä–æ–±–ª–µ–º–∞ 3: Vocal - –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- **–ë—ã–ª–æ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–≥ –∑–∞–¥–∞—Ç—å –ª—é–±–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è gender
- **–ü—Ä–∏–º–µ—Ä—ã:**
  - `preferred_gender="invalid_gender"` ‚Üí –ø—Ä–∏–Ω–∏–º–∞–ª–æ—Å—å –∫–∞–∫ –µ—Å—Ç—å
  - `vocal_profile={"gender": "alien"}` ‚Üí –ø—Ä–∏–Ω–∏–º–∞–ª–æ—Å—å –∫–∞–∫ –µ—Å—Ç—å

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 1: –í–∞–ª–∏–¥–∞—Ü–∏—è BPM

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `studiocore/user_override_manager.py` –∏ `studiocore/core_v6.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
1. –í `UserOverrides.__init__()`:
   - BPM –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º **40-200**
   - –ó–Ω–∞—á–µ–Ω–∏—è –º–µ–Ω—å—à–µ 40 ‚Üí —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –≤ 40
   - –ó–Ω–∞—á–µ–Ω–∏—è –±–æ–ª—å—à–µ 200 ‚Üí —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –≤ 200

2. –í `_enforce_bpm_limits()`:
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã `MIN_SAFE_BPM = 40.0` –∏ `MAX_SAFE_BPM = 200.0`
   - –í—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è BPM (–≤–∫–ª—é—á–∞—è curve) –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç—Å—è —ç—Ç–∏–º–∏ –≥—Ä–∞–Ω–∏—Ü–∞–º–∏
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥—Ä–∞–Ω–∏—Ü–∞—Ö –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ `lock_info`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ `bpm=10` ‚Üí –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç—Å—è –¥–æ `40.0`
- ‚úÖ `bpm=300` ‚Üí –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç—Å—è –¥–æ `200.0`
- ‚úÖ `bpm=-50` ‚Üí –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç—Å—è –¥–æ `40.0`
- ‚úÖ `bpm=120` ‚Üí –æ—Å—Ç–∞–µ—Ç—Å—è `120.0`

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 2: –í–∞–ª–∏–¥–∞—Ü–∏—è Key

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `studiocore/user_override_manager.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
1. –í `UserOverrides.__init__()`:
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, —á—Ç–æ key –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –≤–∞–ª–∏–¥–Ω–æ–π –Ω–æ—Ç—ã (C, C#, D, D#, E, F, F#, G, G#, A, A#, B)
   - –ò–ª–∏ —è–≤–ª—è–µ—Ç—Å—è "auto"
   - –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è ‚Üí —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –≤ `None` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ `key="C major"` ‚Üí –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è
- ‚úÖ `key="D minor"` ‚Üí –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è
- ‚úÖ `key="InvalidKey123"` ‚Üí –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback ("C minor")
- ‚úÖ `key=""` ‚Üí –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 3: –í–∞–ª–∏–¥–∞—Ü–∏—è Vocal

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `studiocore/user_override_manager.py` –∏ `studiocore/core_v6.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
1. –í `UserOverrides.__init__()`:
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, —á—Ç–æ `vocal_profile.gender` –≤—Ö–æ–¥–∏—Ç –≤ —Å–ø–∏—Å–æ–∫ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
   - –î–æ–ø—É—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: `["male", "female", "auto", "neutral", "mixed"]`
   - –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è ‚Üí —É–¥–∞–ª—è—é—Ç—Å—è –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è

2. –í `_backend_analyze()`:
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, —á—Ç–æ `preferred_gender` –≤—Ö–æ–¥–∏—Ç –≤ —Å–ø–∏—Å–æ–∫ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
   - –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è ‚Üí –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ `preferred_gender="male"` ‚Üí –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è
- ‚úÖ `preferred_gender="female"` ‚Üí –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è
- ‚úÖ `preferred_gender="invalid_gender"` ‚Üí –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è auto
- ‚úÖ `vocal_profile={"gender": "alien"}` ‚Üí gender —É–¥–∞–ª—è–µ—Ç—Å—è, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è auto

---

## üìä –¢–µ–∫—É—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### BPM
- **–ú–∏–Ω–∏–º—É–º:** 40 BPM
- **–ú–∞–∫—Å–∏–º—É–º:** 200 BPM
- **Fallback:** 120 BPM (–µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)

### Key
- **–í–∞–ª–∏–¥–Ω—ã–µ –Ω–æ—Ç—ã:** C, C#, D, D#, E, F, F#, G, G#, A, A#, B
- **–í–∞–ª–∏–¥–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:** 
  - `"C major"`, `"D minor"`, `"F# major"` –∏ —Ç.–¥.
  - `"auto"` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ)
- **Fallback:** "C minor" (–µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)

### Vocal Gender
- **–î–æ–ø—É—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:** `"male"`, `"female"`, `"auto"`, `"neutral"`, `"mixed"`
- **Fallback:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–∑ —Ç–µ–∫—Å—Ç–∞ (–∏–ª–∏ "auto")

---

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ!**

–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ–ø–µ—Ä—å –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è:
- ‚úÖ BPM –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏ –≥—Ä–∞–Ω–∏—Ü–∞–º–∏ (40-200)
- ‚úÖ Key –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –º—É–∑—ã–∫–∞–ª—å–Ω–æ–π —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ Vocal gender –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ –¥–æ–ø—É—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- ‚úÖ –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º fallback

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞:** ‚úÖ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–∞

---

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é API –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è—Ö
2. **–°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö:** –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –≤ diagnostics –ø—Ä–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö
3. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è Key:** –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ñ–æ—Ä–º–∞—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ–≤–µ—Ä–∫–∞ mode: major/minor)

