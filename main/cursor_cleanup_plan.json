{
    "project_repair_plan_phase_6_7": {
      "meta": {
        "status_reference": "STATUS_VERGLEICH_PHASE1_2_VS_PHASE4_5.md",
        "previous_phases": "Phases 1-5 COMPLETED",
        "objective": "Execute P2 tasks: Centralize versioning, implement Stubs, and optimize TLP engine."
      },
      "phases": [
        {
          "id": "PHASE_6_VERSION_CENTRALIZATION",
          "name": "Refactor Version Hardcodes",
          "priority": "MEDIUM (P2)",
          "description": "Version strings are scattered across files. Centralize them in config.",
          "target_files": [
            "studiocore/config.py",
            "studiocore/monolith_v4_3_1.py",
            "diagnostics_v8.py",
            "api.py",
            "studiocore/__init__.py"
          ],
          "tasks": [
            {
              "task_id": "6.1",
              "issue": "Hardcoded versions ('v6.4', 'v4.3.11', 'v8.0', '1.0.0') found in multiple files.",
              "location": "studiocore/config.py",
              "action": "Add constants to `DEFAULT_CONFIG` in `studiocore/config.py`: `STUDIOCORE_VERSION = 'v6.4 - maxi'`, `MONOLITH_VERSION = 'v4.3.11'`, `API_VERSION = '1.0.0'`, `DIAGNOSTICS_VERSION = 'v8.0'`."
            },
            {
              "task_id": "6.2",
              "issue": "Files use local string literals for versions.",
              "location": "monolith_v4_3_1.py, diagnostics_v8.py, api.py, __init__.py",
              "action": "Import and use the new constants from `studiocore.config` or `self.config` instead of hardcoded strings."
            }
          ]
        },
        {
          "id": "PHASE_7_RESILIENCE_STUBS",
          "name": "Implement Fallback Stubs",
          "priority": "MEDIUM (P2)",
          "description": "Fallback engine crashes immediately on use. It must return a valid structure.",
          "target_files": [
            "studiocore/fallback.py"
          ],
          "tasks": [
            {
              "task_id": "7.1",
              "issue": "`StudioCoreFallback.analyze` raises RuntimeError.",
              "location": "studiocore/fallback.py",
              "action": "Implement a minimal `analyze` method that returns a safe, static dictionary (using `DEFAULT_CONFIG` values) so the API stays up even if Monolith fails."
            }
          ]
        },
        {
          "id": "PHASE_8_TLP_OPTIMIZATION",
          "name": "TLP Caching",
          "priority": "MEDIUM (P2)",
          "description": "TLP Engine re-calculates scores 5 times per request.",
          "target_files": [
            "studiocore/tlp_engine.py"
          ],
          "tasks": [
            {
              "task_id": "8.1",
              "issue": "Methods `truth_score`, `love_score`, etc., call `analyze()` independently.",
              "location": "studiocore/tlp_engine.py",
              "action": "Add `_last_analysis` cache to `TruthLovePainEngine`. If `analyze(text)` is called with same text, return cached result."
            }
          ]
        }
      ]
    }
  }