{
  "Codex_Action_Template": {
    "version": "1.0",
    "purpose": "Instruction set for Codex to maintain, repair, and extend StudioCore codebase.",
    "actions": {
      "1_read_spec": {
        "description": "Load the StudioCore_Spec JSON file (full specification).",
        "input": "StudioCore_Spec.json",
        "output": "Parsed specification object."
      },
      "2_scan_repository": {
        "description": "Scan all folders and files in the project root.",
        "required_outputs": [
          "list_of_files",
          "list_of_modules",
          "file_contents"
        ]
      },
      "3_crosscheck_modules": {
        "description": "Compare spec.modules with existing repository modules.",
        "tasks": [
          "detect_missing_files",
          "detect_extra_files",
          "detect_missing_classes",
          "detect_missing_functions"
        ],
        "output": "ModuleMismatchReport"
      },
      "4_crosscheck_functions": {
        "description": "Compare spec.functions with functions found in repository.",
        "tasks": [
          "check_missing_functions",
          "check_signature_mismatch",
          "check_unused_functions"
        ],
        "output": "FunctionMismatchReport"
      },
      "5_crosscheck_dependencies": {
        "description": "Verify that all required imports and module relationships exist in code.",
        "tasks": [
          "scan_imports",
          "compare_to_spec",
          "detect_broken_links"
        ],
        "output": "DependencyMismatchReport"
      },
      "6_autogenerate_missing": {
        "description": "If auto_file_generation_policy.enabled = true — create missing components.",
        "conditions": [
          "file missing but required",
          "class missing but required",
          "function missing but required",
          "dependency missing but required"
        ],
        "actions": [
          "create_file_with_stub",
          "insert_required_class_skeleton",
          "insert_function_stub",
          "add_missing_imports"
        ],
        "output": "AutoGeneratedChanges"
      },
      "7_request_confirmation": {
        "description": "Before applying any generated changes — ask user for confirmation.",
        "message": "Codex detected missing components and generated changes. Apply changes?"
      },
      "8_apply_changes": {
        "description": "If user confirms — write changes into repository.",
        "methods": [
          "write_new_files",
          "update_existing_files"
        ],
        "output": "UpdatedRepository"
      },
      "9_validation_pass": {
        "description": "After applying changes — re-run validation against spec.",
        "required_outputs": [
          "ValidationReport",
          "NoErrorsOrWarnings"
        ]
      }
    },
    "safety_rules": {
      "never_overwrite_without_permission": true,
      "user_confirmation_required": true,
      "log_every_action": true
    }
  }
}
