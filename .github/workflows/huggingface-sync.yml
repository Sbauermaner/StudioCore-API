name: Sync HuggingFace → GitHub

on:
  schedule:
    - cron: "*/30 * * * *"   # каждые 30 минут
  workflow_dispatch:        # запуск вручную

jobs:
  sync:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout GitHub repo
      uses: actions/checkout@v3
      with:
        fetch-depth: 0

    - name: Add HuggingFace upstream
      run: |
        git remote add upstream https://huggingface.co/spaces/SBauer8/StudioCore-API || echo "Upstream exists"
        git fetch upstream

    - name: Merge HF → GitHub
      run: |
        git merge upstream/main --allow-unrelated-histories || true

    - name: Push changes to GitHub
      run: |
        git push origin main
